<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="style.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anime List | ROHIT</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body class="anime-page">
    <!-- HEADER -->
    <header class="header">
        <nav class="container nav-container">
            <div class="nav-logo">
                <a href="index.html#home">ROHIT</a>
            </div>
            <div class="nav-menu-wrapper">
                <button class="nav-toggle" aria-label="Toggle Menu">
                    <i class="fas fa-ellipsis-v"></i>
                </button>
                <ul class="nav-links">
                    <li><a href="index.html#home" class="nav-link">HOME</a></li>
                    <li><a href="anime.html" class="nav-link active">ANIME</a></li>
                    <li><a href="index.html#about" class="nav-link">ABOUT</a></li>
                    <li><a href="index.html#connect" class="nav-link">CONTACT</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <!-- GENRE NAVIGATION (Three Dots / Bar) -->
    <div class="genre-nav-wrapper">
        <button class="genre-toggle" aria-label="Toggle Genres">
            <i class="fas fa-ellipsis-v"></i>
        </button>
        <div class="genre-menu">
            <a href="#" class="genre-link" data-genre="All">All</a>
            <a href="#" class="genre-link" data-genre="Romance">Romance</a>
            <a href="#" class="genre-link" data-genre="Action">Action</a>
            <a href="#" class="genre-link" data-genre="Adventure">Adventure</a>
        </div>
    </div>

    <!-- MAIN CONTENT -->
    <main class="container">
        <h1 class="section-title" style="margin-top: 120px;">Anime <span>Collection</span></h1>

        <!-- SEARCH & FILTER -->
        <div class="controls-wrapper">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" id="anime-search" placeholder="Search anime...">
            </div>
            <div class="filter-tags">
                <button class="filter-btn active" data-genre="All">All</button>
                <button class="filter-btn" data-genre="Romance">Romance</button>
                <button class="filter-btn" data-genre="Action">Action</button>
                <button class="filter-btn" data-genre="Adventure">Adventure</button>
            </div>
        </div>

        <div id="anime-display" class="anime-display-area">
            <!-- Dynamic Content Loaded Here -->
        </div>
    </main>

    <!-- FOOTER -->
    <footer>
        <div class="container">
            <p>&copy; 2026 ROHIT | DESIGNED & DEVELOPED BY ME.</p>
            <p style="margin-top: 8px; font-size: 0.85rem;">ALL RIGHTS RESERVED</p>
        </div>
    </footer>

    <script src="anime-data.js"></script>
    <script>
        // Navigation Toggle
        const navToggle = document.querySelector('.nav-toggle');
        const navLinks = document.querySelector('.nav-links');

        navToggle.addEventListener('click', (e) => {
            e.stopPropagation();
            navLinks.classList.toggle('active');
        });

        document.addEventListener('click', (e) => {
            if (navLinks.classList.contains('active') && !navToggle.contains(e.target) && !navLinks.contains(e.target)) {
                navLinks.classList.remove('active');
            }
        });

        // Genre Menu Toggle
        const genreToggle = document.querySelector('.genre-toggle');
        const genreMenu = document.querySelector('.genre-menu');

        genreToggle.addEventListener('click', () => {
            genreMenu.classList.toggle('active');
            genreToggle.classList.toggle('active');
        });

        // Dynamic Loading, Search and Filter
        const animeDisplay = document.getElementById('anime-display');
        const searchInput = document.getElementById('anime-search');
        const filterBtns = document.querySelectorAll('.filter-btn');
        const genreLinks = document.querySelectorAll('.genre-link');

        let currentGenre = 'All';
        let searchTerm = '';

        function renderAnime() {
            animeDisplay.innerHTML = '';

            const filteredAnime = animeData.filter(anime => {
                const matchesGenre = currentGenre === 'All' || anime.genre === currentGenre;
                const matchesSearch = anime.title.toLowerCase().includes(searchTerm.toLowerCase());
                return matchesGenre && matchesSearch;
            });

            if (filteredAnime.length === 0) {
                animeDisplay.innerHTML = '<p class="no-results">No anime found matching your criteria.</p>';
                return;
            }

            // Group by genre for better presentation if "All" is selected, or just list
            const groups = {};
            if (currentGenre === 'All') {
                filteredAnime.forEach(anime => {
                    if (!groups[anime.genre]) groups[anime.genre] = [];
                    groups[anime.genre].push(anime);
                });
            } else {
                groups[currentGenre] = filteredAnime;
            }

            for (const genre in groups) {
                const section = document.createElement('section');
                section.className = 'anime-genre-section fade-in visible';

                const iconMap = {
                    'Romance': 'fa-heart',
                    'Action': 'fa-fire',
                    'Adventure': 'fa-compass'
                };

                section.innerHTML = `
                    <h2 class="genre-title"><i class="fas ${iconMap[genre] || 'fa-star'}"></i> ${genre}</h2>
                    <div class="anime-name-list">
                        ${groups[genre].map(anime => `
                            <a href="details.html?id=${anime.id}" class="anime-name-card">
                                ${anime.title}
                                <i class="fas fa-arrow-right"></i>
                            </a>
                        `).join('')}
                    </div>
                `;
                animeDisplay.appendChild(section);
            }
        }

        searchInput.addEventListener('input', (e) => {
            searchTerm = e.target.value;
            renderAnime();
        });

        function setGenre(genre) {
            currentGenre = genre;
            filterBtns.forEach(btn => {
                btn.classList.toggle('active', btn.getAttribute('data-genre') === genre);
            });
            renderAnime();
            genreMenu.classList.remove('active');
            genreToggle.classList.remove('active');
        }

        filterBtns.forEach(btn => {
            btn.addEventListener('click', () => setGenre(btn.getAttribute('data-genre')));
        });

        genreLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                setGenre(link.getAttribute('data-genre'));
            });
        });

        // Initial Render
        renderAnime();
    </script>
</body>
</html>
